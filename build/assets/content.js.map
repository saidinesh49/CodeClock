{"version":3,"file":"content.js","sources":["../../src/contentScript.js"],"sourcesContent":["console.log('CodeClock: Content script loaded');\r\n\r\nlet timerContainer = null;\r\nlet isDragging = false;\r\nlet currentX;\r\nlet currentY;\r\nlet initialX;\r\nlet initialY;\r\n\r\n// Setup message listener for both development and production\r\nconst setupMessageListener = () => {\r\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n    console.log('CodeClock: Message received:', message);\r\n    if (message.type === 'START_TIMER') {\r\n      injectTimer(message.difficulty);\r\n      sendResponse({ status: 'Timer started' });\r\n    } else if (message.type === 'STOP_TIMER') {\r\n      removeTimer();\r\n      sendResponse({ status: 'Timer stopped' });\r\n    }\r\n    return true; // Keep the message channel open for sendResponse\r\n  });\r\n};\r\n\r\nsetupMessageListener();\r\n\r\nconst injectTimer = (difficulty) => {\r\n  console.log('CodeClock: Injecting timer for difficulty:', difficulty);\r\n  if (timerContainer) {\r\n    removeTimer();\r\n  }\r\n\r\n  timerContainer = document.createElement('div');\r\n  timerContainer.id = 'codeclock-timer-container';\r\n  timerContainer.style.cssText = `\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 20px;\r\n    z-index: 10000;\r\n    background: ${window.codeclock_colors.background.paper};\r\n    padding: 6px 12px;\r\n    border-radius: 20px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    width: fit-content;\r\n    max-width: 200px;\r\n    white-space: nowrap;\r\n    cursor: move;\r\n  `;\r\n\r\n  let time = 0;\r\n  const updateTimer = () => {\r\n    const mins = Math.floor(time / 60);\r\n    const secs = time % 60;\r\n    timeText.textContent = `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n    time++;\r\n  };\r\n\r\n  // Create live indicator\r\n  const liveIndicator = document.createElement('div');\r\n  liveIndicator.style.cssText = `\r\n    width: 8px;\r\n    height: 8px;\r\n    background: #ff375f;\r\n    border-radius: 50%;\r\n    animation: pulse 1.5s infinite;\r\n  `;\r\n\r\n  // Add pulse animation\r\n  const style = document.createElement('style');\r\n  style.textContent = `\r\n    @keyframes pulse {\r\n      0% { opacity: 1; }\r\n      50% { opacity: 0.4; }\r\n      100% { opacity: 1; }\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n\r\n  // Create timer text\r\n  const timeText = document.createElement('div');\r\n  timeText.style.cssText = `\r\n    color: white;\r\n    font-family: monospace;\r\n    font-size: 14px;\r\n  `;\r\n\r\n  // Create stop button\r\n  const stopButton = document.createElement('button');\r\n  stopButton.innerHTML = '⏹';\r\n  stopButton.style.cssText = `\r\n    background: none;\r\n    border: none;\r\n    color: #ffa116;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    font-size: 16px;\r\n  `;\r\n\r\n  stopButton.onclick = () => {\r\n    if (window.confirm('Are you sure you want to stop the timer?')) {\r\n      const message = {\r\n        type: 'TIMER_STOPPED',\r\n        data: { time, difficulty }\r\n      };\r\n      \r\n      chrome.runtime.sendMessage(message);\r\n      removeTimer();\r\n    }\r\n  };\r\n\r\n  timerContainer.appendChild(liveIndicator);\r\n  timerContainer.appendChild(timeText);\r\n  timerContainer.appendChild(stopButton);\r\n  document.body.appendChild(timerContainer);\r\n\r\n  // Start timer\r\n  const interval = setInterval(updateTimer, 1000);\r\n  timerContainer.dataset.interval = interval;\r\n\r\n  // Make timer draggable\r\n  timerContainer.addEventListener('mousedown', dragStart);\r\n  document.addEventListener('mousemove', drag);\r\n  document.addEventListener('mouseup', dragEnd);\r\n};\r\n\r\nconst removeTimer = () => {\r\n  if (timerContainer) {\r\n    clearInterval(Number(timerContainer.dataset.interval));\r\n    document.removeEventListener('mousemove', drag);\r\n    document.removeEventListener('mouseup', dragEnd);\r\n    timerContainer.remove();\r\n    timerContainer = null;\r\n    isDragging = false;\r\n  }\r\n};\r\n\r\nfunction dragStart(e) {\r\n  if (!timerContainer) return;\r\n  initialX = e.clientX - timerContainer.offsetLeft;\r\n  initialY = e.clientY - timerContainer.offsetTop;\r\n  isDragging = true;\r\n}\r\n\r\nfunction drag(e) {\r\n  if (!isDragging || !timerContainer) return;\r\n  e.preventDefault();\r\n  currentX = e.clientX - initialX;\r\n  currentY = e.clientY - initialY;\r\n  timerContainer.style.left = currentX + \"px\";\r\n  timerContainer.style.top = currentY + \"px\";\r\n}\r\n\r\nfunction dragEnd() {\r\n  isDragging = false;\r\n} "],"names":["timerContainer","isDragging","currentX","currentY","initialX","initialY","setupMessageListener","message","sender","sendResponse","injectTimer","removeTimer","difficulty","time","updateTimer","mins","secs","timeText","liveIndicator","style","stopButton","interval","dragStart","drag","dragEnd","e"],"mappings":"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"}